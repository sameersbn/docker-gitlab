#######################
# SQL
#######################
postgresqlstorage:
  image: busybox
  volumes:
    - /opt/gitlab/db:/var/lib/postgresql
postgresql:
  image: sameersbn/postgresql:9.4
  volumes_from:
    - postgresqlstorage
  environment:
    - DB_USER=gitlab
    - DB_PASS=secretpassword
    - DB_NAME=gitlabhq_production
#######################
# WEBAPP
#######################
gitlabstorage:
  image: busybox
  volumes:
   - /opt/gitlab/data:/home/git/data
   - /opt/gitlab/logs:/var/log/gitlab
gitlab:
  build: /Workspaces/appature/git/docker-gitlab
  volumes_from:
    - gitlabstorage
  links:
   - redis:redisio
   - postgresql:postgresql
  ports:
   - "80:80"
   - "443:443"
   - "2222:22"
  environment:
#######################
# REDIS
#######################
redis:
  image: sameersbn/redis:latest
